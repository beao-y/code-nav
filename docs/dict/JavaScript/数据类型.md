# æ•°æ®ç±»å‹
> JavaScript åˆ†ä¸º **åŸºæœ¬æ•°æ®ç±»å‹** å’Œ **å¼•ç”¨æ•°æ®ç±»å‹**ã€‚

## åŸºæœ¬ç±»å‹
> åˆå«åŸå§‹æ•°æ®ç±»å‹ï¼Œå…±7ç§ï¼ŒSymbol å’Œ BigInt æ˜¯ ES6ä¹‹åå¼•å…¥çš„
* `Undefined`
* `Null`
* `Boolean`
* `Number`
* `String`
* `Symbol` (ES6/2015)
* `BigInt` (ES11/2020)

::: tip æ³¨é‡Š
* `Symbol` ç‹¬ä¸€æ— äºŒä¸”ä¸å¯å˜çš„æ•°æ®ç±»å‹ï¼Œä¸ºäº†è§£å†³å…¨å±€å˜é‡å†²çªçš„é—®é¢˜ã€‚
* `BigInt` æ•°å­—ç±»å‹çš„æ•°æ®ï¼Œå®ƒå¯ä»¥è¡¨ç¤ºä»»æ„ç²¾åº¦æ ¼å¼çš„æ•´æ•°ï¼Œ`BigInt` å¯ä»¥å®‰å…¨åœ°å­˜å‚¨å’Œæ“ä½œå¤§æ•´æ•°ï¼Œå³ä½¿è¿™ä¸ªæ•°å·²ç»è¶…å‡ºäº† `Number` èƒ½å¤Ÿè¡¨ç¤ºçš„å®‰å…¨æ•´æ•°èŒƒå›´ã€‚
*  åŸå§‹æ•°æ®å­˜å‚¨åœ¨ **æ ˆå†…å­˜** ä¸­
:::


## å¼•ç”¨ç±»å‹
* `Object`
* `Array`
* `Function`
* `Date`
* `RegExp`
* `Set`
* `WeakSet`
* `Map`
* `WeakMap`

::: tip æ³¨é‡Š
* å¼•ç”¨ç±»å‹åœ¨ **æ ˆå†…å­˜** ä¸­å­˜å‚¨çš„æ˜¯åœ°å€(å†…å­˜æŒ‡é’ˆ)ï¼Œè€Œå¼•ç”¨ç±»å‹ä¸­çš„æ•°æ®(æ–¹æ³•æˆ–å±æ€§)æ˜¯å­˜å‚¨åœ¨ **å †å†…å­˜**  ä¸­ã€‚
* å¤åˆ¶å¼•ç”¨ç±»å‹æ—¶ï¼Œå¤åˆ¶çš„æ˜¯å®ƒçš„å¼•ç”¨åœ°å€(å†…å­˜æŒ‡é’ˆ)ã€‚
:::

## ç±»å‹æ£€æµ‹
* `typeof`
* `instanceof`
* `constructor`
* `Object.prototype.toString.call()`
* `isArrary` (åªæ£€æµ‹æ•°ç»„)

#### typeof
> åŸºæœ¬æ•°æ®ç±»å‹
```js
typeof 13               // number
typeof true            // boolean
typeof 'str'           // string
typeof undefined       // undefined
typeof symbol          // symbol
typeof BigInt(13)      // BigInt
typeof null            // object
```

::: tip null æ˜¯ç‰¹åˆ« ğŸŒ°
JavaScript çš„è®¾è®¡è€…å°†æ‰€æœ‰ç±»å‹çš„å€¼åœ¨å†…éƒ¨ä½¿ç”¨ 8 ä½å­—èŠ‚å­˜å‚¨ï¼Œä¸”ä½¿ç”¨ `0x00` è¡¨ç¤ºç©ºå€¼ `null`
å› æ­¤ `null` çš„å€¼æ˜¯æœºå™¨ç  NULL æŒ‡é’ˆ(null æŒ‡é’ˆçš„å€¼å…¨æ˜¯ 0)
é‚£ä¹Ÿå°±æ˜¯è¯´ `null` çš„ç±»å‹æ ‡ç­¾ä¹Ÿæ˜¯ 000ï¼Œå’Œ `Object` çš„ç±»å‹æ ‡ç­¾ä¸€æ ·ï¼Œæ‰€ä»¥ä¼šè¢«åˆ¤å®šä¸º `Object`
:::

> å¼•ç”¨æ•°æ®ç±»å‹ï¼Œåªèƒ½æ£€æµ‹å‡º `Function`
```js
typeof []              // object    
typeof function(){}    // function
typeof {}              // object
typeof new Set         // object
typeof new Map         // object
```

#### instanceof
```js
2 instanceof Number                    // false
true instanceof Boolean                // false 
'str' instanceof String                // false 
 
([]) instanceof Array                    // true
(function(){}) instanceof Function       // true
({}) instanceof Object                   // true

// åŸå‹é“¾ä¸Š
function Fn(name) {}

const fn = new Fn()

fn instanceof Fn                // true
fn instanceof Object            // true

// ä¿®æ”¹åŸå‹é“¾
Reflect.setPrototypeOf(fn, Array.prototype)
// fn.__proto__ = Array.prototype

fn instanceof Fn                // false
fn instanceof Array             // true
```

::: tip instanceof æ€»ç»“
* `instanceof` ä¸èƒ½åˆ¤æ–­åŸºæœ¬ç±»å‹ï¼Œå¯¹äºå¼•ç”¨ç±»å‹åªèƒ½åˆ¤æ–­åŸå‹é“¾ä¸Šçš„ä»å±å…³ç³»
* `instanceof` å¹¶ä¸å®Œå…¨å¯é ï¼Œå› ä¸ºæ„é€ å‡½æ•°çš„ `prototype` å±æ€§å¯èƒ½ä¼šè¢«ä¿®æ”¹
:::

#### constructor
```js
(13).constructor === Number               // true
(true).constructor === Boolean            // true
('str').constructor === String            // true
([]).constructor === Array                // true
(function() {}).constructor === Function  // true
({}).constructor === Object               // true

// ä¿®æ”¹åŸå‹é“¾
function Fn(){};

Fn.prototype = new Array()

const fn = new Fn()

fn.constructor === Fn         // false
fn.constructor === Array      // true
```

::: tip constructor æ€»ç»“
* `undefined` å’Œ `null` ä¸å­˜åœ¨æ„é€ å‡½æ•°ï¼Œæ‰€ä»¥ä¸èƒ½æ£€æµ‹ç±»å‹
* `constructor` ç±»å‹æ£€æµ‹å¹¶ä¸å®Œå…¨å¯é ï¼Œæ„é€ å‡½æ•°çš„ `prototype` å±æ€§å¯èƒ½ä¼šè¢«ä¿®æ”¹
:::

## Object.prototype.toString.call()
> `Object.prototype.toString.call()` ä½¿ç”¨ `Object` å¯¹è±¡çš„åŸå‹æ–¹æ³• `toString` æ¥åˆ¤æ–­æ•°æ®ç±»å‹
```js
const _toString = Object.prototype.toString

_toString.call(undefined)        // '[object Undefined]'
_toString.call(null)             // '[object Null]'
_toString.call(true)             // '[object Boolean]'
_toString.call('string')         // '[object String]'
_toString.call(2024)             // '[object Number]'
_toString.call(Symbol())         // '[object Symbol]'
_toString.call(BigInt(2024))     // '[object BigInt]'

_toString.call({})               // '[object Object]'
_toString.call([])               // '[object Array]'
_toString.call(console.log)      // '[object Function]'
_toString.call(new Date())       // '[object Date]'
_toString.call(new RegExp())     // '[object RegExp]'
_toString.call(new Set())        // '[object Set]'
_toString.call(new WeakSet())    // '[object WeakSet]'
_toString.call(new Map())        // '[object Map]'
_toString.call(new WeakMap())    // '[object WeakMap]'

// æ”¹å˜åº•å±‚
const obj = {
  [Symbol.toStringTag]: 'Array'
}

console.log(Object.prototype.toString.call(obj)) // '[object Array]'
```

::: tip Object.prototype.toString.call() æ€»ç»“
* `toString` ç±»å‹æ£€æµ‹å¹¶ä¸å®Œå…¨å¯é ï¼Œä½†ä¸€èˆ¬æƒ…å†µæ˜¯ä¸ä¼šå»ä¿®æ”¹å®ƒçš„
:::

## åˆ¤æ–­æ˜¯å¦ä¸ºæ•°ç»„
```js
1. obj.__proto__ === Array.prototype
2. Object.prototype.toString.call(obj) === '[object Array]'
3. Array.isArrray(obj)
4. obj instanceof Array
5. Array.prototype.isPrototypeOf(obj)
```

## 0.1 + 0.2 ä¸ç­‰äº 0.3
```js
// äºŒè¿›åˆ¶è½¬æ¢é—®é¢˜
// æ•´æ•°äºŒè¿›åˆ¶è½¬æ¢
(57).toString(2)       // 111001
parseInt('111001', 2)  //57

// é™¤2 å–ä½™
57/2 28-1 14-0 7-0 3-1 1-1 0-1 // ä»åå¾€å‰ 111001

(0.1).toString(2)
// ä¹˜2 å–æ•´
0.1 * 2  0.2 / 0
0.2 * 2  0.4 / 0
0.4 * 2  0.8 / 0
0.8 * 2  1.6 / 1
0.6 * 2  1.2 / 1
0.2 * 2  0.4 / 0
0.4 * 2  0.8 / 0
0.8 * 2  1.6 / 1
0.6 * 2  1.2 / 1
0.2 * 2  0.4 / 0
0.4 * 2  0.8 / 0
...æ— é™å¾ªç¯
// ä»å‰å¾€å 0.0001100110011001100
```


